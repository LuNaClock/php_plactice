### 6_db_todo/study.md

#### 学びと振り返り

このプロジェクトでは、PHPでデータベース（MySQL）を操作するToDoリストアプリを作成しました。特に、データベースとの接続、データの追加・更新・削除、そしてセキュリティ対策としてのプレースホルダの利用について深く学びました。

**特に重要な学習ポイント:**

*   **データベース接続 (PDO)**: PHP Data Objects (PDO) を用いてMySQLデータベースに接続する方法を学びました。DSN (Data Source Name)、ユーザー名、パスワードの設定が必要です。
*   **エラーハンドリング**: `try-catch` ブロックを使ったデータベース接続エラーの処理方法、および `PDO::ATTR_ERRMODE` と `PDO::ERRMODE_EXCEPTION` を設定することで、SQLエラーが発生した際に例外を発生させ、問題の特定を容易にすることの重要性を理解しました。
*   **SQLの準備と実行 (プリペアドステートメント)**: SQLインジェクション攻撃を防ぐために、`$pdo->prepare()` でSQL文を準備し、`$stmt->bindValue()` でプレースホルダに値をバインドし、`$stmt->execute()` で実行する一連の流れを学びました。これにより、ユーザーからの入力値がSQLの一部として誤って解釈されることを防げます。
*   **プレースホルダ (`?`)**: SQL文内で動的に変化する値を安全に埋め込むための「場所取りの印」として、プレースホルダ (`?`) を使用する方法を理解しました。これは`VALUES (?)` のようにINSERT文で使うだけでなく、`WHERE id = ?` のようにUPDATE文やDELETE文でも利用されます。
*   **データ取得 (`fetchAll`, `PDO::FETCH_ASSOC`)**: `SELECT` 文でデータベースからデータを取得した後、`$stmt->fetchAll(PDO::FETCH_ASSOC)` を使用して、結果を連想配列として全てまとめて取得する方法を学びました。
*   **POST/GETリクエスト処理の明確な区別**: フォームからのデータ送信（タスク追加）にはPOSTリクエストを、タスクの完了や削除といったアクションにはGETリクエストを使い、それぞれの処理をPHPコード内で適切に分岐させる方法を学びました。
*   **HTMLとPHP/CSSの連携**: データベース上の `is_completed` カラムの値（0または1）に基づいて、PHPがHTMLタグの `class` 属性に `completed` という文字列を動的に追加し、そのクラス名に応じてCSSでタスクに取り消し線を表示させる仕組みを理解しました。
*   **XAMPP/phpMyAdminの活用**: アプリケーションを動かす前に、XAMPPに付属するphpMyAdminを使ってデータベースとテーブルを事前に作成することの重要性を学びました。特に `CREATE TABLE` 文の実行によってテーブルの構造を定義する手順を実践しました。 